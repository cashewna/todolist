(()=>{"use strict";var e={464:(e,t,o)=>{o.r(t)},704:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{id;name;todos;constructor(e,t){this.id=e,this.name=t,this.todos=[]}getId(){return this.id}getName(){return this.name}addTodo(e){this.todos.find((t=>t.getId()===e.getId()))?console.log(`Todo "${e.getTitle()}" already exists in project`):this.todos.push(e)}removeTodo(e){const t=this.todos.findIndex((t=>t.getId()===e));-1!==t&&this.todos.splice(t,1)}getTodos(){return this.todos}toJSON(){return{id:this.id,name:this.name,todos:this.todos.map((e=>e.toJSON()))}}}},652:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class o{id;title;description;completed;projectId;projectTitle;priority;dueDate;static nextId=0;constructor(e,t,i,d,s,r,c){this.id=o.nextId++,this.title=i,this.description=d||"",this.completed=!1,this.projectId=e,this.projectTitle=t,this.priority=s||0,this.completed=r||!1,this.dueDate=c}getId(){return this.id}getTitle(){return this.title}getDescription(){return this.description}isCompleted(){return this.completed}getProjectId(){return this.projectId}getPriority(){return this.priority}toJSON(){return{id:this.id,title:this.title,description:this.description,completed:this.completed,projectId:this.projectId,projectTitle:this.projectTitle,priority:this.priority,dueDate:this.dueDate}}}t.default=o},880:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=i(o(704)),s=i(o(652)),r=i(o(604)),c=i(o(816)),n=i(o(263));t.default=class{projects;selectedProject;nextProjectId;projectView;sidebarView;addTodoDialogView;constructor(){this.projects=[],this.projectView=new r.default(this),this.sidebarView=new c.default(this),this.addTodoDialogView=new n.default(this),this.nextProjectId=0,this.addProject("All"),this.setSelectedProject(0),this.addTodoToSelectedProject=this.addTodoToSelectedProject.bind(this),console.log("Constructor:",this.projects)}getProjects(){return this.projects}getSelectedProject(){return this.selectedProject}setSelectedProject(e){this.selectedProject=this.projects.find((t=>t.getId()===e)),this.projectView.updateProjectName(this.selectedProject.getName()),this.projectView.renderTodoList(this.selectedProject.getTodos())}addProject(e){const t=new d.default(this.nextProjectId++,e);return this.projects.push(t),this.sidebarView.addProject(t.getId(),e),t}addTodoToSelectedProject=(e,t,o,i,d)=>{console.log("addTodoToSelectedProjects:",this.projects);const r=this.projects[0];""===e&&(e="All");const c=this.projects.find((t=>t.getName()===e));let n=c?c.getId():null;if(c){const i=new s.default(n,e,t,o);c.addTodo(i),0!==n&&r.addTodo(i),(this.selectedProject.getId()===n||0===this.selectedProject.getId())&&this.projectView.appendTodoItem(i)}else{const i=this.addProject(e),d=new s.default(i.getId(),e,t,o);i.addTodo(d),r.addTodo(d),0===this.selectedProject.getId()&&this.projectView.appendTodoItem(d)}};removeTodo(e,t){if(this.selectedProject.removeTodo(t),this.projectView.renderTodoList(this.selectedProject.getTodos()),0===this.selectedProject.getId()){let o=null;for(let t=1;t<this.projects.length;t++)if(this.projects[t].getId()===e){o=this.projects[t];break}o&&o.removeTodo(t)}else this.projects[0].removeTodo(t)}serializeTodoList(){return JSON.stringify({projects:this.projects[0],nextProjectId:this.nextProjectId})}deserializeTodoList(e){console.log(`Deserializing: ${e}`);const t=JSON.parse(e).projects;for(let e=0;e<t.todos.length;e++){const o=t.todos[e];console.log(t.todos[e]),this.addTodoToSelectedProject(o.projectTitle,o.title,o.description,o.dueDate,o.priority)}}saveTodoListToLocalStorage(){const e=this.serializeTodoList();localStorage.setItem("todoList",e)}loadTodoListFromLocalStorage(){const e=localStorage.getItem("todoList");e&&this.deserializeTodoList(e)}}},740:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),o(464);const d=new(i(o(880)).default);console.log("Loading todo list from local storage"),d.loadTodoListFromLocalStorage(),window.addEventListener("beforeunload",(()=>{console.log("Saving todo list to local storage"),d.saveTodoListToLocalStorage()}))},263:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{dialogElement;addTodoButton;todoListViewModel;form;constructor(e){this.todoListViewModel=e,this.dialogElement=document.querySelector("#add-todo-dialog"),this.addTodoButton=document.querySelector("#add-todo-btn"),this.form=document.querySelector("#add-todo-form"),this.openDialogEventListener(this.addTodoButton),this.addTodoEventListener(this.form)}openDialogEventListener(e){e.addEventListener("click",(e=>{e.stopPropagation(),this.dialogElement.show(),this.closeDialogEventListener(this.dialogElement)}))}closeDialogEventListener(e){document.addEventListener("click",(t=>{e.contains(t.target)||e.close()}))}addTodoEventListener(e){e.addEventListener("submit",(t=>{t.preventDefault();const o=new FormData(e),i=o.get("title"),d=o.get("description"),s=o.get("dueDate"),r=o.get("projectName"),c=o.get("priority");this.todoListViewModel.addTodoToSelectedProject(r,i,d,s,c),this.dialogElement.close()}))}}},604:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{projectNameElement;todoListElement;todoListViewModel;constructor(e){this.todoListViewModel=e,this.projectNameElement=document.querySelector("#project-name"),this.todoListElement=document.querySelector("#todo-list")}updateProjectName(e){this.projectNameElement&&(this.projectNameElement.textContent=e)}renderTodoList(e){this.todoListElement.innerHTML="",e.forEach((e=>{const t=this.createTodoDiv(e);this.todoListElement.appendChild(t)}))}createTodoDiv(e){const t=document.createElement("div");t.classList.add("todo");const o=document.createElement("input");o.type="checkbox",o.checked=e.isCompleted(),t.appendChild(o),o.addEventListener("change",(()=>{t.classList.toggle("completed")}));const i=document.createElement("span");i.textContent=e.getTitle(),t.appendChild(i);const d=document.createElement("p");d.textContent=e.getDescription(),t.appendChild(d);const s=this.createRemoveButton(e.getProjectId(),e.getId());return s.classList.add("remove-todo"),t.appendChild(s),t}appendTodoItem(e){const t=this.createTodoDiv(e);this.todoListElement.appendChild(t)}createRemoveButton(e,t){const o=document.createElement("button");return o.addEventListener("click",(()=>{this.todoListViewModel.removeTodo(e,t)})),o}}},816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{hamburgerElement;sidebarElement;projectListElement;todoListViewModel;constructor(e){this.todoListViewModel=e,this.hamburgerElement=document.querySelector("#hamburger"),this.sidebarElement=document.querySelector("#sidebar"),this.projectListElement=document.querySelector("#project-list"),this.toggleSidebarOnHamburgerClick()}addProject(e,t){const o=document.createElement("li");o.textContent=t,this.projectListElement.appendChild(o),o.addEventListener("click",(()=>{this.todoListViewModel.setSelectedProject(e)}))}toggleSidebarOnHamburgerClick(){this.hamburgerElement.addEventListener("click",(()=>{this.hamburgerElement.classList.toggle("open"),this.sidebarElement.classList.toggle("open")}))}}}},t={};function o(i){var d=t[i];if(void 0!==d)return d.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,o),s.exports}o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(740)})();